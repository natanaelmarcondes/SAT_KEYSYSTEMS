@{
    ViewData["Title"] = "Visualizar Anexo";
    string urlImagem = Url.Action("Anexo", "Produtos", new { codigo = ViewBag.Codigo });

    var tipoBusca = Context.Request.Query["tipoBusca"].ToString();
    var termo = Context.Request.Query["termo"].ToString();

    var urlVoltar = Url.Action("Index", "Home", new { tipoBusca = tipoBusca, termo = termo });

}

<div class="text-center mt-4">

    <!--Botão voltar-->
    <div class="container mt-3 text-start">
        <a href="@urlVoltar" class="btn btn-outline-secondary btn-sm">
            <i class="bi bi-arrow-left"></i> Voltar
        </a>
    </div>

    <!-- SPINNER -->
    <div id="spinner" class="mt-3">
        <div class="spinner-border text-primary" style="width:3rem;height:3rem"></div>
        <p class="mt-2 small">Carregando imagem...</p>
    </div>

    <!-- IMAGEM -->
    <img id="imagem"
         src="@urlImagem"
         alt="Imagem do produto"
         style="max-width: 95%; display: none; border-radius: 6px;" />

</div>

<script>
    const img = document.getElementById("imagem");
    const spinner = document.getElementById("spinner");

    img.onload = function () {
        spinner.style.display = "none";
        img.style.display = "inline";
    };

    img.onerror = function () {
        spinner.innerHTML = "<p class='text-danger fw-bold'>Erro ao carregar a imagem.</p>";
    };
</script>
