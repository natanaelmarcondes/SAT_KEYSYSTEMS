@model IEnumerable<SAT.Models.Produto>

@{
    ViewData["Title"] = "Consulta de Produtos";
}

<div class="container mt-3">

    <!-- TÍTULO ADAPTADO PARA MOBILE -->
    <h1 class="mb-3 text-center text-md-start" style="font-size: 1.6rem;">
        Consulta de Produtos
    </h1>

    <form id="searchForm" method="get" class="row g-2 g-md-3 mb-3">

        <div class="col-12 col-md-3">
            <label class="form-label fw-bold small">Buscar por</label>
            <select name="tipoBusca" class="form-select form-select-sm">
                <option value="codigo">Código</option>
                <option value="descricao" selected>Descrição</option>
                <option value="descricaobusca">Descrição Busca</option>
            </select>
        </div>

        <div class="col-12 col-md-5">
            <label class="form-label fw-bold small">Termo</label>
            <input type="text"
                   name="termo"
                   value="@ViewBag.Termo"
                   class="form-control form-control-sm"
                   placeholder="Digite para buscar..." />
        </div>

        <div class="col-12 col-md-2">
            <label class="form-label small d-none d-md-block">&nbsp;</label>
            <button id="btnBuscar" class="btn btn-primary w-100 btn-sm py-2" type="submit">
                Buscar
            </button>
        </div>

    </form>

    <hr class="mt-4 mb-2" />

    <!-- TABELA MOBILE FRIENDLY -->
    <div class="table-responsive tabela-mobile">
        <table class="table table-striped table-bordered align-middle">
            <thead class="table-dark">
                <tr>
                    <th class="small">Código</th>
                    <th class="small">Descrição</th>
                    <th class="small">Busca</th>
                    <th class="text-center small" style="width: 55px;">Anexo</th>
                </tr>
            </thead>

            <tbody>
                @if (Model != null && Model.Any())
                {
                    foreach (var p in Model)
                    {
                        <tr>
                            <td class="small">@p.prd_Codigo</td>
                            <td class="small">@p.prd_Descri</td>
                            <td class="small">@p.prd_DesBus</td>
                            
                            <td class="text-center">

                                @if (p.TemAnexo)
                                {
                                    <a href="@Url.Action("Visualizar", "Produtos", new { codigo = p.prd_NomImg })">
                                        <i class="bi bi-eye text-success" style="font-size: 1.6rem;"></i>
                                    </a>
                                }
                                else
                                {
                                    <span title="Nenhum anexo encontrado">
                                        <i class="bi bi-exclamation-circle text-secondary" style="opacity: .35; font-size: 1.6rem;"></i>
                                    </span>
                                }

                            </td>

                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="5" class="text-center text-muted small">Nenhum produto encontrado.</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

